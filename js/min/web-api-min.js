$(document).ready(function(){function e(e){function a(e){var a="";$.each(e.items,function(e,t){if(5===e)return!1;a+='<div class="flickr-photos">',a+='<img src=" '+t.media.m+' " alt=" '+t.media.tags+' ">',a+="</div>"}),$(".flickr-show").hide().html(a).fadeIn("slow")}var t={tags:e,tagmode:"any",format:"json"};$.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",t,a)}function a(e){$(".gallery").empty();var a="";$.each(e,function(e,t){a+='<div class="covers">',a+='<img src="'+t.image+'" alt=" '+t.name+'">',a+="</div>"}),$(".gallery").hide().html(a).fadeIn("slow")}function t(e){$(".gallery").empty();var a="";$.each(e,function(e,t){a+='<div class="covers">',a+='<img src="'+t.poster+'" alt=" '+t.name_album+'">',a+="</div>"}),$(".gallery").hide().html(a).fadeIn("slow")}function i(e){$.each(e,function(e,a){var t=a.href;$.getJSON(t).done(function(a){f[e].details=a})})}function r(e){$(".overlay-poster").attr({src:v[e].poster,alt:v[e].release_date}).hide().fadeIn()}function n(e){$(".artist").hide().html("<span>Artist :</span> "+v[e].name_band).fadeIn(),$(".album").hide().html("<span>album :</span> "+v[e].name_album).fadeIn(),$(".release").hide().html("<span>Release Date :</span> "+v[e].release_date).fadeIn()}function s(e){var a="";$.each(v[e].tracks_arr.items,function(e,t){a+="<tr><td>"+t.track_number+". "+t.name+"</td></tr>"}),$(".replace-table").hide().html(a).fadeIn()}function l(e){$.each(e,function(e,a){var t={index:e,name_album:a.name,name_band:a.details.artists[0].name,release_date:a.details.release_date,tracks_arr:a.details.tracks,poster:a.details.images[0].url};v.push(t)})}function o(){v.sort(function(e,a){return parseFloat(e.release_date)-parseFloat(a.release_date)})}function c(a){e(f[a].name),n(a),s(a),r(a)}var d=10,f=[],v=[];$("#flickr-submit").click(function(e){e.preventDefault(),$(".gallery").empty(),f=[];var t=$("#flickr-search").val().split(" ").join("+"),i={client_id:"e8dbd39d940f44a0a5e37d114a917614",redirect_uri:"https://k00ry.github.io/web_api_v1/"};$.getJSON("https://accounts.spotify.com/authorize/?response_type=code&scope=user-read-private%20user-read-email",i).done(function(e){$(".sort").css("display","flex"),console.log(e),$(".covers").removeAttr("data-created"),a(f)})});var m,u;$(".gallery").on("click","div",function(){var a=$(this).attr("data-created");void 0!==a&&!1!==a?(u=$(this).attr("data-created"),e(v[u].name_album),n(u),s(u),r(u)):(m=$(this).index(),v=[],e(f[m].name),l(f),n(m),s(m),r(m)),$("#overlay").addClass("open").css("display","flex")}),$("#overlay").click(function(){$("#overlay").removeClass("open"),m=void 0,u=void 0}),$(".left-arrow").click(function(e){e.stopPropagation();var a=$(".gallery").children().length;void 0===u&&m>0?(m-=1,c(m)):void 0===u&&0===m?(m=a-1,c(m)):void 0===m&&u>0?(u-=1,c(u)):void 0===m&&0===u&&(u=a-1,c(u))}),$(".right-arrow").click(function(e){e.stopPropagation();var a=$(".gallery").children().length;void 0===u&&m<=a-2?(m+=1,c(m)):void 0===u&&m===a-1?(m=0,c(m)):void 0===m&&u<a-1?(u=Number(u),u+=1,c(u)):void 0===m&&u===a-1&&(u=0,c(u))}),$(".date").click(function(){!1===$(this).hasClass("active")?($(this).addClass("active"),v=[],l(f),o(),t(v),$(".covers").each(function(e){$(this).attr("data-created",e)})):!0===$(this).hasClass("active")&&($(this).removeClass("active"),v=[],l(f),a(f))})});