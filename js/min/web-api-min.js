$(document).ready(function(){function e(e){function a(e){var a="";$.each(e.items,function(e,t){return 5===e?!1:(a+='<div class="flickr-photos">',a+='<img src=" '+t.media.m+' " alt=" '+t.media.tags+' ">',void(a+="</div>"))}),$(".flickr-show").hide().html(a).fadeIn("slow")}var t="https://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",i={tags:e,tagmode:"any",format:"json"};$.getJSON(t,i,a)}function a(e){$(".gallery").empty();var a="";$.each(e,function(e,t){a+='<div class="covers">',a+='<img src="'+t.image+'" alt=" '+t.name+'">',a+="</div>"}),$(".gallery").hide().html(a).fadeIn("slow")}function t(e){$(".gallery").empty();var a="";$.each(e,function(e,t){a+='<div class="covers">',a+='<img src="'+t.poster+'" alt=" '+t.name_album+'">',a+="</div>"}),$(".gallery").hide().html(a).fadeIn("slow")}function i(e){$.each(e,function(e,a){var t=a.href;$.getJSON(t).done(function(a){m[e].details=a})})}function n(e){$(".overlay-poster").attr({src:f[e].poster,alt:f[e].release_date}).hide().fadeIn()}function r(e){$(".artist").hide().html("<span>Artist :</span> "+f[e].name_band).fadeIn(),$(".album").hide().html("<span>album :</span> "+f[e].name_album).fadeIn(),$(".release").hide().html("<span>Release Date :</span> "+f[e].release_date).fadeIn()}function l(e){var a="";$.each(f[e].tracks_arr.items,function(e,t){a+="<tr><td>"+t.track_number+". "+t.name+"</td></tr>"}),$(".replace-table").hide().html(a).fadeIn()}function s(e){$.each(e,function(e,a){var t={index:e,name_album:a.name,name_band:a.details.artists[0].name,release_date:a.details.release_date,tracks_arr:a.details.tracks,poster:a.details.images[0].url};f.push(t)})}function o(){f.sort(function(e,a){return parseFloat(e.release_date)-parseFloat(a.release_date)})}function c(a){e(m[a].name),r(a),l(a),n(a)}var d=10,m=[],f=[];$("#flickr-submit").click(function(e){e.preventDefault(),$(".gallery").empty(),m=[];var t=$("#flickr-search").val().split(" ").join("+"),n="https://api.spotify.com/v1/search",r={q:t,type:"album",limit:d};$.getJSON(n,r).done(function(e){$.each(e.albums.items,function(e,a){if(a.images.length>0){var t={id:a.id,name:a.name,href:a.href,image:a.images[0].url};m.push(t),i(m)}}),$(".covers").removeAttr("data-created"),a(m)}),$(".sort").css("display","flex")});var u,v;$(".gallery").on("click","div",function(){var a=$(this).attr("data-created");"undefined"!=typeof a&&a!==!1?(v=$(this).attr("data-created"),e(f[v].name_album),r(v),l(v),n(v)):(u=$(this).index(),f=[],e(m[u].name),s(m),r(u),l(u),n(u)),$("#overlay").addClass("open").css("display","flex")}),$("#overlay").click(function(){$("#overlay").removeClass("open"),u=void 0,v=void 0}),$(".left-arrow").click(function(e){e.stopPropagation();var a=$(".gallery").children().length;void 0===v&&u>0?(u-=1,c(u)):void 0===v&&0===u?(u=a-1,c(u)):void 0===u&&v>0?(v-=1,c(v)):void 0===u&&0===v&&(v=a-1,c(v))}),$(".right-arrow").click(function(e){e.stopPropagation();var a=$(".gallery").children().length;void 0===v&&a-2>=u?(u+=1,c(u)):void 0===v&&u===a-1?(u=0,c(u)):void 0===u&&a-1>v?(v=Number(v),v+=1,c(v)):void 0===u&&v===a-1&&(v=0,c(v))}),$(".date").click(function(){f=[],s(m),o(),t(f),$(".covers").each(function(e){$(this).attr("data-created",e)})})});