$(document).ready(function(){function a(a){function e(a){console.log(a.items);var e="";$.each(a.items,function(a,t){return 5===a?!1:(e+='<div class="flickr-photos">',e+='<img src=" '+t.media.m+' " alt=" '+t.media.tags+' ">',void(e+="</div>"))}),$(".flickr-show").html(e)}var t="https://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",n={tags:a,tagmode:"any",format:"json"};$.getJSON(t,n,e)}function e(){var a="";$.each(o,function(e,t){a+='<div class="covers">',a+='<img src="'+t.image+'" alt=" '+t.name+' ">',a+="</div>"}),$(".gallery").append(a)}function t(a){$.each(a,function(a,e){var t=e.href;$.getJSON(t).done(function(e){o[a].details=e})})}function n(a){$(".overlay-poster").attr("src",c[a].poster)}function i(a){$(".artist").html("<span>Artist :</span> "+c[a].name_band),$(".album").html("<span>album :</span> "+c[a].name_album),$(".release").html("<span>Release Date :</span> "+c[a].release_date)}function s(a){var e="";$.each(c[a].tracks_arr.items,function(a,t){e+="<tr><td>"+t.track_number+". "+t.name+"</td></tr>"}),$(".replace-table").html(e)}function r(){$.each(o,function(a,e){var t={index:a,name_album:e.name,name_band:e.details.artists[0].name,release_date:e.details.release_date,tracks_arr:e.details.tracks,poster:e.details.images[0].url};c.push(t)})}var c=[],l=10,o=[];$("#flickr-submit").click(function(a){function n(a){$.each(a.albums.items,function(a,e){if(e.images.length>0){var t={id:e.id,name:e.name,href:e.href,image:e.images[0].url};o.push(t)}}),t(o),e()}a.preventDefault(),$(".gallery").empty(),o=[];var i=$("#flickr-search").val().split(" ").join("+"),s="https://api.spotify.com/v1/search",r={q:i,type:"album",limit:l};$.getJSON(s,r,n)});var m;$(".gallery").on("click","div",function(){m=$(this).index();var e=o[m].name;console.dir(e),a(e),r(),i(m),s(m),n(m),$("#overlay").addClass("open").css("display","flex")}),$("#overlay").click(function(){$("#overlay").removeClass("open")}),$(".left-arrow").click(function(a){a.stopPropagation(),m>0?(m-=1,i(m),s(m),n(m)):0===m&&(m=9,i(m),s(m),n(m))}),$(".right-arrow").click(function(a){a.stopPropagation(),8>=m?(m+=1,i(m),s(m),n(m)):9===m&&(m=0,i(m),s(m),n(m))})});