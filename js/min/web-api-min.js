$(document).ready(function(){var a=[],e=20;$("#flickr-submit").click(function(t){function n(e){$.each(e.albums.items,function(e,t){function n(){$.each(a,function(e,t){var n=t.href;$.getJSON(n).done(function(t){a[e].details=t})})}if(t.images.length>0){var s={id:t.id,name:t.name,href:t.href,image:t.images[0].url};a.push(s)}n()});var t="";$.each(a,function(a,e){t+='<div class="photos">',t+='<img src="'+e.image+'" alt=" '+e.name+' ">',t+="</div>"}),$(".gallery").html(t)}t.preventDefault();var s="https://api.spotify.com/v1/search",r=$("#flickr-search").val().toLowerCase(),l={q:r,type:"album",limit:e};console.log(a),$.getJSON(s,l,n)}),$(".gallery").on("click","div",function(){function e(a){var e="<table>";$.each(n[a].tracks_arr.items,function(a,t){e+="<tr><td>"+t.track_number+". "+t.name+"</td></tr>"}),e+="</table>",$(".table").append(e)}var t=$(this).index(),n=[];$.each(a,function(a,e){var t={index:a,name_album:e.name,name_band:e.details.artists[0].name,release_date:e.details.release_date,tracks_arr:e.details.tracks,poster:e.details.images[0].url};n.push(t)}),$(".artist").html("<span>Artist :</span> "+n[t].name_band),$(".album").html("<span>album :</span> "+n[t].name_album),$(".release").html("<span>Release Date :</span> "+n[t].release_date),console.log(n),e(t),console.log(n[t].tracks_arr.items);var s=n[t].poster;$(".overlay-poster").attr("src",s),$("#overlay").addClass("open").css("display","flex")}),$("#overlay").click(function(){$("#overlay").removeClass("open")})});